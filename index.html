<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Система авторизации</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }
        .container {
            display: none;
        }
        #login-form {
            margin-top: 50px;
        }
        input, button {
            padding: 10px;
            margin: 5px;
            font-size: 16px;
        }
        #welcome-message {
            font-size: 24px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="login-form">
        <h2>Введите ваше имя</h2>
        <input type="text" id="username-input" placeholder="Ваше имя" required>
        <button onclick="login()">Войти</button>
        <p id="error-message" style="color: red;"></p>
    </div>

    <div id="user-container" class="container">
        <h1 id="welcome-message"></h1>
        <button onclick="logout()">Выйти</button>
        <div id="user-list">
            <h3>Зарегистрированные пользователи:</h3>
            <ul id="users-list"></ul>
        </div>
    </div>

    <script>
        // Проверяем, есть ли сохраненный пользователь
        document.addEventListener('DOMContentLoaded', function() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                showUserInterface(savedUser);
            }
            updateUsersList();
        });

        // Функция входа
        function login() {
            const usernameInput = document.getElementById('username-input');
            const errorMessage = document.getElementById('error-message');
            const username = usernameInput.value.trim();

            if (!username) {
                errorMessage.textContent = 'Пожалуйста, введите имя';
                return;
            }

            // Получаем список существующих пользователей
            let users = JSON.parse(localStorage.getItem('users')) || [];

            // Проверяем, есть ли пользователь в списке
            const userExists = users.includes(username);

            if (!userExists) {
                // Добавляем нового пользователя
                users.push(username);
                localStorage.setItem('users', JSON.stringify(users));
            }

            // Сохраняем текущего пользователя
            localStorage.setItem('currentUser', username);
            showUserInterface(username);
            updateUsersList();
        }

        // Функция выхода
        function logout() {
            localStorage.removeItem('currentUser');
            document.getElementById('login-form').style.display = 'block';
            document.getElementById('user-container').style.display = 'none';
            document.getElementById('username-input').value = '';
        }

        // Показать интерфейс пользователя
        function showUserInterface(username) {
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('user-container').style.display = 'block';
            document.getElementById('welcome-message').textContent = `Добро пожаловать, ${username}!`;
        }

        // Обновить список пользователей
        function updateUsersList() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const usersList = document.getElementById('users-list');
            usersList.innerHTML = '';

            users.forEach(user => {
                const li = document.createElement('li');
                li.textContent = user;
                usersList.appendChild(li);
            });
        }
    </script>
</body>
</html>
